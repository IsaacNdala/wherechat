"use strict";(self["webpackChunkwherechat"]=self["webpackChunkwherechat"]||[]).push([[475],{3475:function(e,s,t){t.r(s),t.d(s,{default:function(){return he}});var a=t(3396);const r={class:"profile"};function l(e,s,t,l,i,o){const d=(0,a.up)("top-navigation"),n=(0,a.up)("image-zoom-in"),c=(0,a.up)("profile-card"),m=(0,a.up)("edit-profile-card"),u=(0,a.up)("edit-password"),g=(0,a.up)("delete-card"),p=(0,a.up)("bottom-navigation");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(d),(0,a.Wm)(n,{imageUrl:o.user.imageUrl},null,8,["imageUrl"]),(0,a.Wm)(c,{user:o.user,profile:!0},null,8,["user"]),(0,a.Wm)(m,{user:o.user},null,8,["user"]),(0,a.Wm)(u,{user:o.user},null,8,["user"]),(0,a.Wm)(g,{user:o.user},null,8,["user"]),(0,a.Wm)(p)])}var i=t(8515),o=t(7925),d=t(7577),n=t(3513),c=t(7139),m=t(9242);const u={class:"edit-card__img-container border"},g=["src"],p=(0,a._)("i",{class:"fi fi-rr-cross d-flex text-danger"},null,-1),h=[p],w={class:"mb-3 d-flex justify-content-center"},_=(0,a._)("label",{for:"image",class:"form-label border"},[(0,a._)("i",{class:"fi fi-rr-picture"}),(0,a.Uk)(" Choose an image")],-1),b={class:"mb-2 row g-2 align-items-center"},v={class:"col-6"},f={class:"col-6"},C={class:"mb-3"},y={class:"row g-3 align-items-center"},D={class:"col-6"},E=(0,a._)("i",{class:"fi fi-rr-cross"},null,-1),k=(0,a.Uk)(),F=(0,a._)("span",null,"Close",-1),P=[E,k,F],U=(0,a._)("div",{class:"col-6"},[(0,a._)("button",{id:"edit-submit",class:"btn btn-primary col-12"},[(0,a._)("i",{class:"fi fi-rr-pencil"}),(0,a.Uk)(),(0,a._)("span",null,"Edit")])],-1);function Z(e,s,t,r,l,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)(["edit-card-container",{"hide-container":e.showEdit}])},[(0,a._)("div",{class:(0,c.C_)(["mt-2 mb-1 alert alert-danger text-danger alert-dismissible fade show",{"show-alert":l.alertDanger}]),role:"alert"},[(0,a.Uk)((0,c.zw)(l.message)+" ",1),(0,a._)("button",{type:"button",onClick:s[0]||(s[0]=(...e)=>i.closeAlert&&i.closeAlert(...e)),class:"btn-close","aria-label":"Close"})],2),(0,a._)("div",{class:(0,c.C_)([{"show-alert":l.alertSuccess},"alert alert-success"]),role:"alert"},(0,c.zw)(l.message),3),(0,a._)("div",{class:"overlay",onClick:s[1]||(s[1]=(...e)=>i.closeEditCard&&i.closeEditCard(...e))}),(0,a._)("div",{class:(0,c.C_)(["edit-card",{"move-edit":e.showEdit}])},[(0,a._)("div",u,[(0,a._)("img",{id:"preview",src:e.serverDomain+i.loggedUser.imageUrl,alt:"user"},null,8,g)]),l.remove?((0,a.wg)(),(0,a.iD)("span",{key:0,id:"remove-image",class:"border",onClick:s[2]||(s[2]=e=>i.removePreview(t.user))},h)):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:s[8]||(s[8]=(0,m.iM)(((...e)=>i.editProfile&&i.editProfile(...e)),["prevent"])),class:"edit-card__form"},[(0,a._)("div",w,[_,(0,a._)("input",{type:"file",id:"image",class:"d-none",onChange:s[3]||(s[3]=(...e)=>i.onChangeFile&&i.onChangeFile(...e)),accept:".png, .jpg, .jpeg"},null,32)]),(0,a._)("div",b,[(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"firstName",placeholder:"First name","onUpdate:modelValue":s[4]||(s[4]=e=>l.editForm.firstName=e),required:""},null,512),[[m.nr,l.editForm.firstName]])]),(0,a._)("div",f,[(0,a.wy)((0,a._)("input",{type:"text",id:"lastName",class:"form-control",placeholder:"Last name","onUpdate:modelValue":s[5]||(s[5]=e=>l.editForm.lastName=e),required:""},null,512),[[m.nr,l.editForm.lastName]])])]),(0,a._)("div",C,[(0,a.wy)((0,a._)("input",{type:"email",id:"email",class:"form-control",placeholder:"Email","onUpdate:modelValue":s[6]||(s[6]=e=>l.editForm.email=e),required:""},null,512),[[m.nr,l.editForm.email]])]),(0,a._)("div",y,[(0,a._)("div",D,[(0,a._)("button",{type:"button",onClick:s[7]||(s[7]=(...e)=>i.closeEditCard&&i.closeEditCard(...e)),class:"btn btn-dark col-12"},P)]),U])],32)],2)],2)}var N=t(4239),I=t(9749),A=t(6265),S=t.n(A),B={name:"EditCard",props:["user"],data(){return{move:!1,remove:!1,alertSuccess:!1,alertDanger:!1,message:null,editForm:{image:null,firstName:null,lastName:null,email:null,imageChanged:!1}}},computed:{...(0,I.rn)(["showEdit","serverDomain"]),loggedUser(){return N.Z.state.user}},methods:{...(0,I.OI)(["closeEdit"]),closeEditCard(){this.closeEdit()},closeAlert(){this.alertDanger=!1},async editProfile(){document.getElementById("edit-submit").disabled=!0;try{const e=new FormData;e.append("firstName",this.editForm.firstName),e.append("lastName",this.editForm.lastName),e.append("email",this.editForm.email),e.append("image",this.editForm.image),e.append("imageChanged",this.editForm.imageChanged);const s=await S().post(N.Z.state.serverDomain+"user/edit-profile",e,{headers:{Authorization:`Bearer ${N.Z.state.token}`}});this.message=s.data.msg;const t={firstName:s.data.user.firstName,lastName:s.data.user.lastName,email:s.data.user.email,imageUrl:s.data.user.imageUrl,id:s.data.user._id,token:N.Z.state.token};localStorage.setItem("user",JSON.stringify(t));const a=JSON.parse(localStorage.getItem("user"));N.Z.commit("setUser",a),N.Z.commit("setToken",a.token),s&&(this.alertSuccess=!0,this.alertDanger=!1,this.removePreview(t),setTimeout((()=>{this.closeEdit(),this.alertSuccess=!1,document.getElementById("edit-submit").disabled=!1}),2e3))}catch(e){document.getElementById("edit-submit").disabled=!1,e.response&&401===e.response.status&&this.$router.push("/login"),e.response?this.message=e.response.data.msg:this.message="This a server error try again!",this.alertSuccess=!1,this.alertDanger=!0}},onChangeFile(){let e=document.getElementById("image").files[0],s=document.getElementById("preview");if(this.editForm.image=e,this.editForm.imageChanged=!0,e){const t=new FileReader;t.onload=()=>{s.setAttribute("src",t.result)},t.readAsDataURL(e),this.remove=!0}},removePreview(e){let s=document.getElementById("preview");s.setAttribute("src",N.Z.state.serverDomain+e.imageUrl),this.remove=!1,this.editForm.image=document.getElementById("image").value=null,this.editForm.imageChanged=!1}},created(){this.editForm.firstName=N.Z.state.user.firstName,this.editForm.lastName=N.Z.state.user.lastName,this.editForm.email=N.Z.state.user.email}},x=t(89);const z=(0,x.Z)(B,[["render",Z]]);var T=z;const W=(0,a._)("h4",{class:"text-center"},[(0,a._)("i",{class:"fi fi-rr-lock"}),(0,a.Uk)(" Change Password")],-1),$={class:"mb-3"},q=(0,a._)("label",{for:"password",class:"form-label"},"Password",-1),V={class:"mb-3"},O=(0,a._)("label",{for:"newPassword",class:"form-label"},"New password",-1),j={class:"row g-3 align-items-center"},M={class:"col-6"},Y=(0,a._)("i",{class:"fi fi-rr-cross"},null,-1),J=(0,a.Uk)(),L=(0,a._)("span",null,"Close",-1),R=[Y,J,L],G=(0,a._)("div",{class:"col-6"},[(0,a._)("button",{id:"edit-password-submit",class:"btn btn-primary col-12"},[(0,a._)("span",null,"Change")])],-1);function H(e,s,t,r,l,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)(["edit-password-card-container",{"hide-edit-password":e.showEditPassword}])},[(0,a._)("div",{class:(0,c.C_)(["mt-2 mb-1 alert alert-danger text-danger alert-dismissible fade show",{"show-alert":l.alertDanger}]),role:"alert"},[(0,a.Uk)((0,c.zw)(l.message)+" ",1),(0,a._)("button",{type:"button",onClick:s[0]||(s[0]=(...e)=>i.closeAlert&&i.closeAlert(...e)),class:"btn-close","aria-label":"Close"})],2),(0,a._)("div",{class:(0,c.C_)([{"show-alert":l.alertSuccess},"alert alert-success"]),role:"alert"},(0,c.zw)(l.message),3),(0,a._)("div",{class:"overlay",onClick:s[1]||(s[1]=(...e)=>i.closeEditPasswordCard&&i.closeEditPasswordCard(...e))}),(0,a._)("div",{class:(0,c.C_)(["edit__card",{"move-edit":e.showEditPassword}])},[W,(0,a._)("form",{onSubmit:s[5]||(s[5]=(0,m.iM)(((...e)=>i.editPassword&&i.editPassword(...e)),["prevent"])),class:"edit__card__form"},[(0,a._)("div",$,[q,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>l.passwordForm.password=e),type:"password",id:"password",class:"form-control",placeholder:"Your corrent password",required:""},null,512),[[m.nr,l.passwordForm.password]])]),(0,a._)("div",V,[O,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>l.passwordForm.newPassword=e),type:"password",id:"newPassword",class:"form-control",placeholder:"Your new password",required:""},null,512),[[m.nr,l.passwordForm.newPassword]])]),(0,a._)("div",j,[(0,a._)("div",M,[(0,a._)("button",{type:"button",onClick:s[4]||(s[4]=(...e)=>i.closeEditPasswordCard&&i.closeEditPasswordCard(...e)),class:"btn btn-dark col-12"},R)]),G])],32)],2)],2)}var K={name:"EditPasswordCard",props:["user"],data(){return{passwordForm:{password:"",newPassword:""},alertSuccess:!1,alertDanger:!1,message:null}},computed:{...(0,I.rn)(["showEditPassword"])},methods:{...(0,I.OI)(["closeEditPassword"]),closeEditPasswordCard(){this.closeEditPassword()},closeAlert(){this.alertDanger=!1},async editPassword(){document.getElementById("edit-password-submit").disabled=!0;try{const e=await S().post(N.Z.state.serverDomain+"user/edit-password",this.passwordForm,{headers:{Authorization:`Bearer ${N.Z.state.token}`}});this.message=e.data.msg,e&&(this.alertSuccess=!0,this.alertDanger=!1,setTimeout((()=>{this.closeEditPasswordCard(),this.alertSuccess=!1,document.getElementById("edit-password-submit").disabled=!1}),2e3))}catch(e){document.getElementById("edit-password-submit").disabled=!1,e.response&&401===e.response.status&&this.$router.push("/login"),e.response?this.message=e.response.data.msg:this.message="This a server error try again!",this.alertSuccess=!1,this.alertDanger=!0}}}};const Q=(0,x.Z)(K,[["render",H]]);var X=Q;const ee=(0,a._)("h4",{class:"text-center"},[(0,a._)("i",{class:"fi fi-rr-trash"}),(0,a.Uk)(" Delete Account")],-1),se=(0,a._)("p",{class:"text-center"},"Do You want to delete your account?",-1),te={class:"row g-3 align-items-center"},ae={class:"col-6"},re=(0,a._)("i",{class:"fi fi-rr-cross"},null,-1),le=(0,a.Uk)(),ie=(0,a._)("span",null,"Close",-1),oe=[re,le,ie],de=(0,a._)("div",{class:"col-6"},[(0,a._)("button",{id:"del-submit",class:"btn btn-danger col-12"},[(0,a._)("i",{class:"fi fi-rr-trash"}),(0,a.Uk)(),(0,a._)("span",null,"Delete")])],-1);function ne(e,s,t,r,l,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,c.C_)(["delete-card-container",{"hide-delete":e.showDeleteAccount}])},[(0,a._)("div",{class:(0,c.C_)(["mt-2 mb-1 alert alert-danger text-danger alert-dismissible fade show",{"show-alert":l.alertDanger}]),role:"alert"},[(0,a.Uk)((0,c.zw)(l.message)+" ",1),(0,a._)("button",{type:"button",onClick:s[0]||(s[0]=(...e)=>i.closeAlert&&i.closeAlert(...e)),class:"btn-close","aria-label":"Close"})],2),(0,a._)("div",{class:(0,c.C_)([{"show-alert":l.alertSuccess},"alert alert-success"]),role:"alert"},(0,c.zw)(l.message)+" ðŸ™ ",3),(0,a._)("div",{class:"overlay",onClick:s[1]||(s[1]=(...e)=>i.closeDelCard&&i.closeDelCard(...e))}),(0,a._)("div",{class:(0,c.C_)(["edit__card",{"move-edit":e.showDeleteAccount}])},[ee,se,(0,a._)("form",{onSubmit:s[3]||(s[3]=(0,m.iM)(((...e)=>i.deleteAccount&&i.deleteAccount(...e)),["prevent"])),class:"edit__card__form"},[(0,a._)("div",te,[(0,a._)("div",ae,[(0,a._)("button",{type:"button",onClick:s[2]||(s[2]=(...e)=>i.closeDelCard&&i.closeDelCard(...e)),class:"btn btn-dark col-12"},oe)]),de])],32)],2)],2)}var ce={name:"DeleteCard",props:["user"],data(){return{deleteForm:{userId:null,imageUrl:null},alertSuccess:!1,alertDanger:!1,message:null}},computed:{...(0,I.rn)(["showDeleteAccount"])},methods:{...(0,I.OI)(["closeDel"]),closeDelCard(){this.closeDel()},closeAlert(){this.alertDanger=!1},async deleteAccount(){document.getElementById("del-submit").disabled=!0;try{const e=await S().post(N.Z.state.serverDomain+"user/delete-account",this.deleteForm,{headers:{Authorization:`Bearer ${N.Z.state.token}`}});this.message=e.data.msg,e&&(this.alertSuccess=!0,this.alertDanger=!1,setTimeout((()=>{this.alertSuccess=!1,document.getElementById("del-submit").disabled=!1,this.closeDelCard(),this.$router.push("/login")}),2e3))}catch(e){document.getElementById("del-submit").disabled=!1,e.response&&401===e.response.status&&this.$router.push("/login"),e.response?this.message=e.response.data.msg:this.message="This a server error try again!",this.alertSuccess=!1,this.alertDanger=!0}}},created(){this.deleteForm.userId=N.Z.state.user.userId,this.deleteForm.imageUrl=N.Z.state.user.imageUrl}};const me=(0,x.Z)(ce,[["render",ne]]);var ue=me,ge={name:"ProfileView",components:{BottomNavigation:i.Z,TopNavigation:o.Z,ImageZoomIn:d.Z,ProfileCard:n.Z,EditProfileCard:T,EditPassword:X,DeleteCard:ue},computed:{user(){return N.Z.state.user}}};const pe=(0,x.Z)(ge,[["render",l]]);var he=pe}}]);
//# sourceMappingURL=475.4cdd204a.js.map